
## Signalisation - Tableau

```{r, echo = FALSE, eval = TRUE}

# Pour calculs des temps de passage des POIs
dep_etape_time <- iti_etape$Details[(Etape),] %>% select(dttm_depart) %>% pull()
vit_moy_etape <- iti_etape$Details[(Etape),] %>% select(Vit_moy) %>% pull()

calcul_h_passage <- function(km){
  
  duree <- dhours(km /vit_moy_etape)
  time_passage_moy = dep_etape_time + duree
  time_passage_moy_h_m = format(time_passage_moy, format= "%H:%M" )
  
  return(time_passage_moy_h_m)
  
}

# Obtenir tous les POIs de signalisation de l'étape
POIs <- POIs_signalisation(Etape)

# Création du tableau style 'Kable'
POIs_tableau <- POIs_tableau(POIs)

# Affichage du tableau contenant tous les POIs de signalisation de l'étape
POIs_tableau

# nombre de ligne total
poi_nombre <- nrow(POIs)

# Compteur pour affichage ligne par ligne détaillée
poi_idx <- 1

# Premier point
P <- POIs %>% slice(poi_idx)

```


## Signalisation - Détails


### Point d'intérêt - `r P$ID`

```{r, echo = FALSE, eval = TRUE}

# Affichage des 2 tableaux détaillés 
P_sign_detail_1(P)
P_sign_detail_2(P)

```

#### Localisation du point d'intérêt {-}

```{r, out.width="70%",fig.align='center',  echo = FALSE, eval = TRUE}

knitr::include_graphics(here("img", "cartes" ,"sign", glue("{P$ID}.png")))

```


#### Photo du point d'intérêt {-}

```{r, out.width="100%",fig.align='center',  echo = FALSE, eval = TRUE}

knitr::include_graphics(here("img", "sign", P$image))

```


```{r, echo = FALSE, eval = TRUE}

# incrémente index
poi_idx <- poi_idx + 1

# nouveau point
P <-  if( poi_idx <= poi_nombre){
  POIs %>% slice(poi_idx)
  }

```

----



